{% extends "base.html" %}

{% block title %}Veranstaltungen - Vaple{% endblock %}

{% block content %}
    <h1>Veranstaltungen</h1>
    <table class='event-list'>
        <tr>
        {% for name in verbose_names %}
            <th>{{ name }}</th>
        {% endfor %}
            <th>Datum</th>
        </tr>
    {% for event, form in object_list %}
        <tr>
          <form method="post" action="{% url 'vaple_core:update_event' event.id %}">
            {% csrf_token %}
            {{ form.as_table_row }}
            <td>{% for date in event.eventdate_set.all %}{{ date.date }}, {% endfor %}<a href="{% url 'vaple_core:event_dates' event.id %}">Bearbeiten</a></td>
            <td></td>
            <td><input type="submit" value="Speichern"></td>
          </form>

          <form method="post" action="{% url 'vaple_core:delete_event' event.id %}">
            {% csrf_token %}
            <td><input type="submit" value="Löschen"></td>
          </form>
        </tr>
    {% empty %}
        <p>Keine Veranstaltungen mit den gewählten Kriterien gefunden.</p>
    {% endfor %}
    </table>
    <form method="post" action="{% url 'vaple_core:add_event' %}">
        {% csrf_token %}
        <input name="title" type="hidden" value="Neue Veranstaltung" />
        <input name="room" type="hidden" value="" />
        <input name="sound_type" type="hidden" value="NONE" />
        <input type="submit" value="Hinzufügen">
    </form>
{% endblock %}
